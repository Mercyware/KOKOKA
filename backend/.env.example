# =============================================================================
# KOKOKA SCHOOL MANAGEMENT SYSTEM - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control

# =================================
# APPLICATION SETTINGS
# =================================
NODE_ENV=development
PORT=5000
HOST=localhost
APP_NAME=KOKOKA
APP_VERSION=2.0.0

# URLs and Domains
API_URL=http://localhost:5000/api
BACKEND_URL=http://localhost:5000
FRONTEND_URL=http://localhost:8080
WEBSITE_URL=http://localhost:5173
MAIN_DOMAIN=schoolmanagement.com

# Production URLs (for reference)
# API_URL=https://api.kokoka.com/api
# BACKEND_URL=https://api.kokoka.com
# FRONTEND_URL=https://app.kokoka.com
# WEBSITE_URL=https://www.kokoka.com
# MAIN_DOMAIN=kokoka.com

# =================================
# DATABASE CONFIGURATION (PostgreSQL)
# =================================
# PostgreSQL Database URL - Primary database (for Prisma)
DATABASE_URL=postgresql://kokoka_user:kokoka_password@localhost:5432/kokoka

# Database Connection Pool Settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_TIMEOUT=30000

# =================================
# REDIS CONFIGURATION
# =================================
# Redis Connection (URL format for Docker/Cloud) - Preferred method
REDIS_URL=redis://:redis_password@localhost:6379

# Alternative individual settings (used if REDIS_URL not provided)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_DB=0

# =================================
# AUTHENTICATION & SECURITY
# =================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production-minimum-32-characters
JWT_REFRESH_SECRET=your-super-secret-jwt-refresh-key-change-in-production-minimum-32-characters
JWT_EXPIRE=1d
JWT_REFRESH_EXPIRE=7d
JWT_ISSUER=kokoka-school-management
JWT_AUDIENCE=kokoka-users
JWT_ALGORITHM=HS256

# Session Configuration (Redis-based sessions)
SESSION_SECRET=your-session-secret-change-in-production-minimum-32-characters
SESSION_MAX_AGE=604800000
SESSION_SECURE=false
SESSION_SAME_SITE=lax

# OAuth Configuration
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
LINKEDIN_CLIENT_ID=your-linkedin-oauth-client-id
LINKEDIN_CLIENT_SECRET=your-linkedin-oauth-client-secret

# Password Security
PASSWORD_RESET_EXPIRE=10
ACTIVATION_TOKEN_EXPIRE=1440
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=30
ENCRYPTION_KEY=your-encryption-key-32-chars-long

# =================================
# CORS & SECURITY SETTINGS
# =================================
# CORS Origins - Allow frontend app and website (local)
CORS_ORIGIN=http://localhost:8080,http://localhost:5173,http://localhost:3000
# Production: CORS_ORIGIN=https://app.kokoka.com,https://www.kokoka.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_CREDENTIALS=true

# Security Middleware
HELMET_ENABLED=true
XSS_PROTECTION_ENABLED=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# =================================
# FILE UPLOAD & STORAGE
# =================================
FILE_BASE_URL=/uploads
UPLOAD_MAX_SIZE=104857600
FILE_UPLOAD_MAX_SIZE=5242880
FILE_UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# AWS S3 Configuration
AWS_S3_ENABLED=true
AWS_S3_REGION=us-east-1
AWS_S3_BUCKET_NAME=kokoka-students
AWS_S3_ACCESS_KEY_ID=AKIAU6GO3NNC6VMDDYRZ
AWS_S3_SECRET_ACCESS_KEY=yIRhRCRVk9ura+Spij8NSsudyrpTuQzT7J9ShARtG
AWS_S3_CDN_URL=https://your-cloudfront-domain.com
AWS_S3_PUBLIC_URL=https://your-bucket.s3.your-region.amazonaws.com

# Image Upload Settings
IMAGE_MAX_SIZE=5242880
IMAGE_ALLOWED_TYPES=image/jpeg,image/png,image/webp
IMAGE_QUALITY=80
IMAGE_MAX_WIDTH=1200
IMAGE_MAX_HEIGHT=1200

# =================================
# EMAIL CONFIGURATION
# =================================
# Amazon SES SMTP Configuration
SES_SMTP_HOST=email-smtp.us-east-1.amazonaws.com
SES_SMTP_PORT=587
SES_SMTP_SECURE=false
SES_SMTP_USER=your-ses-smtp-username
SES_SMTP_PASSWORD=your-ses-smtp-password

# Email Settings
EMAIL_ENABLED=true
EMAIL_FROM=KOKOKA School Management <noreply@kokoka.com>
EMAIL_NO_REPLY=noreply@kokoka.com
EMAIL_SUPPORT=support@kokoka.com

# Email Verification Settings
EMAIL_VERIFICATION_TOKEN_EXPIRE=24
EMAIL_VERIFICATION_RESEND_LIMIT=3

# Legacy SMTP Configuration (for backward compatibility)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Alternative email settings (for backward compatibility)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-email-password

# Email Features
FEATURE_EMAIL_ENABLED=true

# =================================
# SMS CONFIGURATION
# =================================
# SMS Provider Configuration
SMS_PROVIDER=twilio
SMS_API_KEY=your-sms-api-key
SMS_API_SECRET=your-sms-api-secret
SMS_FROM=KOKOKA
FEATURE_SMS_ENABLED=true

# =================================
# NOTIFICATION SYSTEM CONFIGURATION
# =================================
# Global Notification Settings
NOTIFICATIONS_ENABLED=true
NOTIFICATIONS_MAX_RETRY_ATTEMPTS=3
NOTIFICATIONS_RETRY_DELAY_MS=5000
NOTIFICATIONS_BATCH_SIZE=100
NOTIFICATIONS_QUEUE_ENABLED=true

# Email Notifications (SendGrid)
EMAIL_NOTIFICATIONS_ENABLED=true
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@kokoka.com
SENDGRID_FROM_NAME=KOKOKA School Management
SENDGRID_REPLY_TO=support@kokoka.com
SENDGRID_WEBHOOK_SECRET=your-sendgrid-webhook-secret

# Alternative Email Provider (Nodemailer - fallback)
NODEMAILER_ENABLED=false
NODEMAILER_HOST=smtp.gmail.com
NODEMAILER_PORT=587
NODEMAILER_SECURE=false
NODEMAILER_USER=your-email@gmail.com
NODEMAILER_PASS=your-app-password

# SMS Notifications (Enhanced)
SMS_NOTIFICATIONS_ENABLED=true
SMS_PROVIDER=twilio
SMS_DEFAULT_COUNTRY_CODE=+1

# Twilio Configuration
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WEBHOOK_SECRET=your-twilio-webhook-secret

# Alternative SMS Providers
# AWS SNS Configuration
AWS_SNS_ENABLED=false
AWS_SNS_ACCESS_KEY_ID=your-aws-access-key
AWS_SNS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_SNS_REGION=us-east-1

# Vonage/Nexmo Configuration  
VONAGE_ENABLED=false
VONAGE_API_KEY=your-vonage-api-key
VONAGE_API_SECRET=your-vonage-api-secret
VONAGE_FROM=KOKOKA

# Push Notifications
PUSH_NOTIFICATIONS_ENABLED=true
PUSH_PROVIDER=firebase

# Firebase Configuration
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_CLIENT_EMAIL=your-firebase-client-email
FIREBASE_PRIVATE_KEY=your-firebase-private-key
FIREBASE_DATABASE_URL=https://your-project.firebaseio.com

# Alternative Push Provider - OneSignal
ONESIGNAL_ENABLED=false
ONESIGNAL_APP_ID=your-onesignal-app-id
ONESIGNAL_REST_API_KEY=your-onesignal-rest-api-key

# In-App Notifications (WebSocket)
WEBSOCKET_NOTIFICATIONS_ENABLED=true
WEBSOCKET_PORT=5001
WEBSOCKET_CORS_ORIGIN=http://localhost:3000,http://localhost:3001
WEBSOCKET_HEARTBEAT_INTERVAL=30000

# Webhook Notifications
WEBHOOK_NOTIFICATIONS_ENABLED=false
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_TIMEOUT=5000

# Notification Templates
TEMPLATES_AUTO_CREATE=true
TEMPLATES_SCHOOL_BRANDING=true
TEMPLATES_DEFAULT_LANGUAGE=en
TEMPLATES_CACHE_TTL=3600

# Notification Preferences
USER_PREFERENCES_ENABLED=true
QUIET_HOURS_ENABLED=true
NOTIFICATION_DIGEST_ENABLED=true
NOTIFICATION_DIGEST_FREQUENCY=daily

# =================================
# AI INTEGRATION
# =================================
# AI Provider Configuration
AI_PROVIDER=openai
AI_API_KEY=your-openai-api-key
AI_API_URL=https://api.openai.com/v1
AI_MODEL=gpt-4
AI_MAX_TOKENS=1000
AI_TEMPERATURE=0.7

# Alternative OpenAI settings (for backward compatibility)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4

# AI Features
FEATURE_AI_ENABLED=true

# =================================
# FEATURE FLAGS
# =================================
FEATURE_ATTENDANCE_QR=true
FEATURE_PARENT_PORTAL=true
FEATURE_DOCUMENT_MANAGEMENT=true
FEATURE_GRADING_SYSTEM=true
MAINTENANCE_MODE=false

# =================================
# LOGGING & DEBUGGING
# =================================
LOG_LEVEL=info
DEBUG=false
ENABLE_REQUEST_LOGGING=true
ENABLE_DB_LOGGING=false

# =================================
# SWAGGER DOCUMENTATION
# =================================
API_CONTACT_EMAIL=support@kokoka.com
PRODUCTION_API_URL=https://api.kokoka.com

# =============================================================================
# DEVELOPMENT NOTES
# =============================================================================
# - This configuration is for PostgreSQL + Redis architecture
# - MongoDB settings have been removed in favor of PostgreSQL
# - Redis is used for sessions, caching, and pub/sub
# - All legacy MongoDB environment variables have been cleaned up
# - For Docker deployment, ensure DATABASE_URL and REDIS_URL point to containers
# - In production, use strong secrets and proper SSL/TLS configuration